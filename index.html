<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PRANNA  - App de Lealtad</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffffff">
<style>
  body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #ffffff; }
  .hidden { display: none !important; }
  .view { padding: 1.5rem; max-width: 500px; margin: 0 auto; }
  .card { background: #fff; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  header { background: #ffffff; color: #000000; padding: 2rem 1rem; text-align: center; }
  input { width: 100%; padding: 1rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }
  button { width: 100%; padding: 1rem; border: none; border-radius: 8px; background: #ffffff; color: #000000; font-size: 1rem; font-weight: bold; cursor: pointer; }
  .tab-buttons { display: flex; gap: 8px; margin-bottom: 1rem; }
  .tab-buttons button { flex: 1; background: #f0f0f0; color: #333; }
  .tab-buttons button.active { background: #ffffff; color: #000000; }
  .chat-box { height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; background: #f9f9f9; }
</style>
</head>
<body>

<header>
  <h2>PRANNA </h2>
</header>

<main>
  <div id="customerLoginView" class="view">
    <div class="card">
      <h3>Iniciar Sesión</h3>
      <input id="phone" placeholder="Teléfono (12345 para admin)">
      <input id="bdate" type="date" placeholder="Fecha de Nacimiento">
      <button id="loginBtn">Ingresar</button>
    </div>
  </div>

  <div id="adminLoginView" class="view hidden">
    <div class="card">
      <h3>Acceso de Vendedor</h3>
      <input id="adminUser" value="admin">
      <input id="adminPass" type="password" placeholder="Contraseña">
      <button id="adminLoginBtn">Acceder</button>
    </div>
  </div>

  <div id="appView" class="view hidden">
      </div>

  <div id="adminDashboardView" class="view hidden">
      </div>
</main>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycbwOKhMehdSSN5jnihqscyuNUWQf8_O2trftcRz2Gi4xEWD6p_2776vGgEP2TEapJfZz/exec';
  let loginClickCount = 0;
  let loginClickTimer = null;

  function showView(viewId) {
    document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
    document.getElementById(viewId)?.classList.remove('hidden');
  }

  // LÓGICA DEL BOTÓN DE LOGIN PRINCIPAL
  document.getElementById('loginBtn').addEventListener('click', () => {
    const phoneInput = document.getElementById('phone');
    if (phoneInput.value === '12345') {
      loginClickCount++;
      clearTimeout(loginClickTimer);
      loginClickTimer = setTimeout(() => { loginClickCount = 0; }, 1500); // Reset after 1.5s
      if (loginClickCount >= 10) {
        loginClickCount = 0;
        showView('adminLoginView');
      }
    } else {
      loginCustomer();
    }
  });

  async function loginCustomer() {
    const phone = document.getElementById('phone').value;
    const bdate = document.getElementById('bdate').value;
    if (!phone || !bdate) {
      alert('Datos incompletos');
      return;
    }
    // Lógica para llamar al API para el login de cliente
    console.log('Iniciando sesión como cliente...');
  }
  
  // Event listener para el botón de login de admin
  document.getElementById('adminLoginBtn').addEventListener('click', () => {
    console.log('Iniciando sesión como admin...');
    // Aquí iría la llamada al API para el login de admin
  });

</script>
</body>
</html>
